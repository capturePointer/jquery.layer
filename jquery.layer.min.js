!function(){function n(){return j.appendTo("body").show()}function t(){return j.hide()}function e(n){n.find(".jquery-layer-close-evt").on("click",function(){r(n)}),$(window).on("resize",function(){i(n)})}function r(n){n.remove(),t()}function i(n){n.css({marginLeft:-n.outerWidth()/2,marginTop:-n.outerHeight()/2})}function o(t,r){return t=$(t).appendTo("body"),t.find(".jquery-layer-close").focus(),r.call(null,t),n(),i(t),e(t),t}function c(n,t,e){var r='<div class="#{z} zoomIn" style="width:#{width}; height:#{height};"><form>';return r+=n,r+=t,r+=e,r+="</form></div>"}function a(){return'<div class="#{z}-title noselect"><span class="#{z}-h2">#{title}</span><a href="#{j}" class="#{z}-close #{z}-close-evt"></a></div>'}function u(n){var t='<div class="#{z}-bar #{z}-noselect #{z}-zoom">';return $(n).each(function(n,e){t+='<a href="#{j}" class="#{z}-btn-'+n+' #{z}-btn #{z}-ml10 #{z}-fr">'+e+"</a>"}),t+="<div>"}function l(){return'<div class="#{z}-nav">#{content}</div>'}function f(n){return $.extend(n,{j:"javascript:;",z:"jquery-layer"})}function s(n){return p.text(n).appendTo("body").show(),i(p),clearTimeout(z),z=setTimeout(function(){p.fadeOut()},3e3),p}function d(n,t){return h({title:"确认框",content:n,btns:["确定","取消"],callback:function(n){n("取消",function(n,t){n()}),n("确定",function(n,e){t(),n()})}}).find(".jquery-layer-btn-0").focus().addClass("jquery-layer-btn-blue").end()}function y(n){return h({title:"确认框",content:n,btns:["确定"],callback:function(n){n("确定",function(n,t){n()})}}).find(".jquery-layer-btn-0").addClass("jquery-layer-btn-blue").end()}function b(n){n.content='<iframe src="'+n.url+'" class="layer-loading" frameborder="no" width="100%" border="0">';var t=h(n).find(".jquery-layer-btn-0").addClass("jquery-layer-btn-blue").end();return t.find("iframe").height(t.outerHeight()-73),t}function v(n){var t;return n.btns=["提交"],n.callback=function(e){e("提交",function(e,r,i){if(n.beforeSubmit){var o=n.beforeSubmit.call(t,r,i);if(o===!1)return}$.post(n.postUrl,r,function(t){n.postSuccess&&n.postSuccess.call(null,e,t)})})},n.getUrl&&$.get(n.getUrl,function(e){n.content=m(n.content,e),t=h(n).find(".jquery-layer-btn-0").focus().addClass("jquery-layer-btn-blue").end()}),t}function h(n){var t={},e=c(a(),l(),u(n.btns));return e=m(e,f(n)),e=o(e,function(n){var e=n.find("form");n.find(".jquery-layer-btn").on("click",function(){var i=t[$(this).text()];"function"==typeof i&&i.call(n,function(){r(n)},e.serialize(),e.serializeArray())})}),n.callback&&n.callback.call(this,function(n,e){t[n]=e}),e}function m(n,t){return n.replace(/#\{([\s\S]+?)\}/g,function(n,e){return t[e]})}var z,j=$('<div class="jquery-layer-mask"></div>'),p=$('<div class="jquery-layer-tip zoomIn"></div>');$.extend({layer:{mask:n,hideMask:t,tip:s,box:h,confirm:d,alert:y,iframe:b,form:v}})}();